\documentclass[11pt, article, oneside]{memoir}

\settrims{0pt}{0pt} % page and stock same size
\settypeblocksize{*}{36pc}{*} % {height}{width}{ratio}
\setlrmargins{*}{*}{1} % {spine}{edge}{ratio}
\setulmarginsandblock{1in}{1in}{*} % height of typeblock computed
\setheadfoot{\onelineskip}{2\onelineskip} % {headheight}{footskip}
\setheaderspaces{*}{1.5\onelineskip}{*} % {headdrop}{headsep}{ratio}
\checkandfixthelayout



\usepackage{mathtools}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{stmaryrd}
\usepackage{newpxtext}
\usepackage[utf8]{inputenc}
\usepackage[varg,bigdelims]{newpxmath}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{tikz}
\usepackage{graphicx}
\usepackage{enumitem}
\usepackage{mathpartir}
\usepackage[bookmarks=true, colorlinks=true, linkcolor=blue!50!red, citecolor=orange,
pdfencoding=unicode]{hyperref}

\usepackage[capitalize]{cleveref}
  \newcommand{\creflastconjunction}{, and\nobreakspace}%Make cleveref use serial comma

\usepackage[backend=biber,style = alphabetic]{biblatex}
  \addbibresource{Library20171004.bib}



\usetikzlibrary{
	cd,
	math,
	decorations.markings,
	positioning,
	arrows.meta,
	shapes,
	calc,
	fit,
	quotes,
	intersections}
\hypersetup{final}

  \tikzset{
     oriented WD/.style={%everything after equals replaces "oriented WD" in key.
        every to/.style={out=0,in=180,draw},
        label/.style={
           font=\everymath\expandafter{\the\everymath\scriptstyle},
           inner sep=0pt,
           node distance=2pt and -2pt},
        semithick,
        node distance=1 and 1,
        decoration={markings, mark=at position \stringdecpos with \stringdec},
        ar/.style={postaction={decorate}},
        execute at begin picture={\tikzset{
           x=\bbx, y=\bby,
           every fit/.style={inner xsep=\bbx, inner ysep=\bby}}}
        },
     string decoration/.store in=\stringdec,
     string decoration={\arrow{stealth};},
     string decoration pos/.store in=\stringdecpos,
     string decoration pos=.7,
     bbx/.store in=\bbx,
     bbx = 1.5cm,
     bby/.store in=\bby,
     bby = 1.5ex,
     bb port sep/.store in=\bbportsep,
     bb port sep=1.5,
     % bb wire sep/.store in=\bbwiresep,
     % bb wire sep=1.75ex,
     bb port length/.store in=\bbportlen,
     bb port length=4pt,
     bb penetrate/.store in=\bbpenetrate,
     bb penetrate=0,
     bb min width/.store in=\bbminwidth,
     bb min width=1cm,
     bb rounded corners/.store in=\bbcorners,
     bb rounded corners=2pt,
     bb small/.style={bb port sep=1, bb port length=2.5pt, bbx=.4cm, bb min width=.4cm, 
bby=.7ex},
		 bb medium/.style={bb port sep=1, bb port length=2.5pt, bbx=.4cm, bb min width=.4cm, 
bby=.9ex},
     bb/.code 2 args={%When you see this key, run the code below:
        \pgfmathsetlengthmacro{\bbheight}{\bbportsep * (max(#1,#2)+1) * \bby}
        \pgfkeysalso{draw,minimum height=\bbheight,minimum width=\bbminwidth,outer 
sep=0pt,
           rounded corners=\bbcorners,thick,
           prefix after command={\pgfextra{\let\fixname\tikzlastnode}},
           append after command={\pgfextra{\draw
              \ifnum #1=0{} \else foreach \i in {1,...,#1} {
                 ($(\fixname.north west)!{\i/(#1+1)}!(\fixname.south west)$) +(-
\bbportlen,0) 
  coordinate (\fixname_in\i) -- +(\bbpenetrate,0) coordinate (\fixname_in\i')}\fi 
  %Define the endpoints of tickmarks
              \ifnum #2=0{} \else foreach \i in {1,...,#2} {
                 ($(\fixname.north east)!{\i/(#2+1)}!(\fixname.south east)$) +(-
\bbpenetrate,0) 
  coordinate (\fixname_out\i') -- +(\bbportlen,0) coordinate (\fixname_out\i)}\fi;
           }}}
     },
     bb name/.style={append after command={\pgfextra{\node[anchor=north] at 
(\fixname.north) {#1};}}}
  }


  \tikzset{
  	unoriented WD/.style={
  		every to/.style={draw},
  		shorten <=-\penetration, shorten >=-\penetration,
  		label distance=-2pt,
  		thick,
  		node distance=\spacing,
  		execute at begin picture={\tikzset{
  			x=\spacing, y=\spacing}}
  		},
  	pack size/.store in=\psize,
  	pack size = 8pt,
  	spacing/.store in=\spacing,
  	spacing = 8pt,
  	link size/.store in=\lsize,
  	link size = 2pt,
		penetration/.store in=\penetration,
		penetration = 2pt,
  	pack color/.store in=\pcolor,
  	pack color = blue,
  	pack inside color/.store in=\picolor,
  	pack inside color=blue!20,
  	pack outside color/.store in=\pocolor,
  	pack outside color=blue!50!black,
  	surround sep/.store in=\ssep,
  	surround sep=8pt,
  	link/.style={
  		circle, 
  		draw=black, 
  		fill=black,
  		inner sep=0pt, 
  		minimum size=\lsize
  	},
  	pack/.style={
  		circle, 
  		draw = \pocolor, 
  		fill = \picolor,
  		inner sep = .25*\psize,
  		minimum size = \psize
  	},
  	outer pack/.style={
  		ellipse, 
  		draw,
  		inner sep=\ssep,
  		color=\pocolor,
  	},
  	intermediate pack/.style={
  		ellipse,
  		dashed, 
  		draw,
  		inner sep=\ssep,
  		color=\pocolor,
  	},
  }




\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[chapter] %change [] to chapter if we want to change global numbering
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{conjecture}[theorem]{Conjecture}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{construction}[theorem]{Construction}
\newtheorem{notation}[theorem]{Notation}
\newtheorem{axiom}{Axiom}
\newtheorem*{axiom*}{Axiom}

\theoremstyle{remark}
\newtheorem{example}[theorem]{Example}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{warning}[theorem]{Warning}

\setcounter{axiom}{-1}

% Renewed commands

\renewcommand{\ss}{\subseteq}

% Macros %
\newcommand{\const}[1]{\mathtt{#1}}
\newcommand{\Set}[1]{\mathrm{#1}}
\newcommand{\cat}[1]{\mathcal{#1}}
\newcommand{\Cat}[1]{\mathbf{#1}}
\newcommand{\fun}[1]{\mathit{#1}}
\newcommand{\Fun}[1]{\mathsf{#1}}

\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Mor}{Mor}
\DeclareMathOperator*{\colim}{colim}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\Ob}{Ob}

\newcommand{\cocolon}{:\!}
\newcommand{\iso}{\cong}
\newcommand{\To}[1]{\xrightarrow{#1}}
\newcommand{\Too}[1]{\xrightarrow{\;\;#1\;\;}}
\newcommand{\from}{\leftarrow}
\newcommand{\From}[1]{\xleftarrow{#1}}
\newcommand{\Fromm}[1]{\xleftarrow{\;\;#1\;\;}}
\newcommand{\surj}{\twoheadrightarrow}
\newcommand{\inj}{\rightarrowtail}

\newcommand{\tn}[1]{\textnormal{#1}}
\newcommand{\ol}[1]{\overline{#1}}
\newcommand{\ul}[1]{\underline{#1}}
\newcommand{\wt}[1]{\widetilde{#1}}

\newcommand{\Psh}[1]{\Fun{Psh}(#1)}


\newcommand{\op}{^\tn{op}}

\newcommand{\erase}[1]{}
\newcommand{\dtodo}[2][]{\todo[linecolor=white, backgroundcolor=white, bordercolor=gray, #1]{#2}}
\newcommand{\stodo}[2][]{\todo[color=red!30, #1]{#2}}



\setlist{nosep}
\linespread{1.2}
\allowdisplaybreaks
\setsecnumdepth{subsection}
\settocdepth{section}
\setlength{\parindent}{15pt}

%------------ Document ------------%
\begin{document}


\title{Wiring operads}

\author{
  Sophie Raynor
  \and 
  David I. Spivak\thanks{The work presented here was supported by AFOSR grants 
FA9550--14--1--0031 and FA9550--17--1--0058.}
}
\date{}

\maketitle

%-------- Chapter --------%
\chapter{Introduction}

There are many sorts of categorical structures---categories, monoidal categories, traced monoidal categories, hypergraph categories, operads, etc.---and each has an associated sort of string diagram. A category with said structure, call it $\cat{C}$, can ``interpret'' such a string diagram as a morphism in $\cat{C}$. For example, the four sorts of categorical structures listed above can interpret the following sorts of morphisms
\[
\begin{tikzpicture}
\begin{scope}[oriented WD, bb port sep=1, bb port length=2.5pt, bb min width=.4cm, bby=.3cm, inner xsep=.2cm, font=\small, text height=1.5ex, text depth=1ex, x=.5cm, y=.3cm]
	\node[bb={1}{1}] (Catf) {$f$};
	\node[bb={1}{1}, right=1 of Catf] (Catg) {$g$};
	\node[bb={0}{0}, fit=(Catf) (Catg)] (Cat) {};
	\node[coordinate] at (Cat.west|-Catf_in1) (Cat_in1) {};
	\node[coordinate] at (Cat.east|-Catg_out1) (Cat_out1) {};
	\draw (Cat_in1) -- (Catf_in1);
	\draw (Catf_out1) -- (Catg_in1);
	\draw (Catg_out1) -- (Cat_out1);
%
	\node[bb={1}{2}, above right=-1.5 and 4 of Catf] (Monf) {$f$};
	\node[bb={2}{1}, below right=-1 and 1 of Monf] (Mong) {$g$};
	\node[bb={0}{0}, fit=(Monf) (Mong)] (Mon) {};
	\node[coordinate] at (Mon.west|-Monf_in1) (Mon_in1) {};
	\node[coordinate] at (Mon.west|-Mong_in2) (Mon_in2) {};
	\node[coordinate] at (Mon.east|-Monf_out1) (Mon_out1) {};
	\node[coordinate] at (Mon.east|-Mong_out1) (Mon_out2) {};
	\draw (Mon_in1) -- (Monf_in1);
	\draw (Monf_out1) -- (Mon_out1);
	\draw (Monf_out2) to (Mong_in1);
	\draw (Mon_in2) -- (Mong_in2);
	\draw (Mong_out1) -- (Mon_out2);
%
	\node[bb={2}{1}, right= 5 of Monf] (Trf) {$f$};
	\node[bb={2}{2}, below right=-1 and 1 of Trf] (Trg) {$g$};
	\node[bb={0}{0}, fit={($(Trf.north west)+(-1,1)$) ($(Trg.south east)+(1,-1)$)}] (Tr) {};
	\node[coordinate] at (Tr.west|-Trf_in2) (Tr_in1) {};
	\node[coordinate] at (Tr.west|-Trg_in2) (Tr_in2) {};
	\node[coordinate] at (Tr.east|-Trf_out1) (Tr_out1) {};
	\node[coordinate] at (Tr.east|-Trg_out2) (Tr_out2) {};
	\draw (Tr_in1) -- (Trf_in2);
	\draw (Trf_out1) to (Trg_in1);
	\draw (Tr_in2) -- (Trg_in2);
	\draw (Trg_out2) -- (Tr_out2);
	\draw let \p1=(Trg.east), \p2=(Trf.north west), \n1=\bbportlen, \n2=\bby in
		(Trg_out1) to[in=0] (\x1+\n1,\y2+\n2) -- (\x2-\n1,\y2+\n2) to[out=180] (Trf_in1);
%
\end{scope}
\begin{scope}[penetration=0, unoriented WD, pack outside color=black, pack inside color=white, font=\small, text height=1.5ex, text depth=1ex]
	\node[pack, right=3 of Trf] (Hypf) {$f$};
	\node[pack, below right=0 and .5 of Hypf] (Hypg) {$g$};
	\node[outer pack, inner sep=5pt, fit=(Hypf) (Hypg)] (Hyp) {};
	\node[coordinate] at ($(Hypg.-30)!.5!(Hyp.-30)$) (link) {};
	\draw (Hypf) to[bend left] (Hypg);
	\draw (Hypf) to[bend right] (Hypg);
	\draw (Hypg) -- (link);
	\draw[shorten >= -2pt] (link) -- (Hyp.-20);
	\draw[shorten >= -2pt] (link) -- (Hyp.-40);
	\draw[shorten >= -2pt] (Hypf) -- (Hyp);
\end{scope}
\end{tikzpicture}
\]



%-------- Chapter --------%
\chapter{Wiring operads}

%-------- Chapter --------%
\chapter{Examples}


\printbibliography
\printindex


\end{document}